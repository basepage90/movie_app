{"version":3,"sources":["movie-func.js","App.js","index.js"],"names":["initState","isLoading","HQPoster","Movie","title","subtitle","image","pubDate","director","actor","userRating","link","useState","state","setState","trans_title","replace","trans_director","trans_actor","rating","width","GetHighQualityPoster","a","regexp1","code","match","substr","getHighQualityPoster","axios","get","data","$","cheerio","load","res","attr","useEffect","console","log","className","href","src","alt","style","App","movies","getMovies","headers","params","items","this","map","movie","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.645d0263.chunk.js","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport axios from \"axios\";\r\nimport cheerio from \"cheerio\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./movie.css\";\r\n\r\nMovie.propTypes= {\r\n    title : PropTypes.string.isRequired,\r\n    subtitle : PropTypes.string.isRequired,\r\n    image : PropTypes.string.isRequired,\r\n    pubDate : PropTypes.string.isRequired,\r\n    director : PropTypes.string.isRequired,\r\n    actor : PropTypes.string.isRequired,\r\n    userRating : PropTypes.string.isRequired,\r\n}\r\n\r\nconst initState = {\r\n    isLoading: true,\r\n    HQPoster: \"\"\r\n}\r\n\r\nfunction Movie({title,subtitle,image,pubDate,director,actor,userRating,link}){\r\n    const [state, setState] = useState(initState);\r\n    const trans_title = title.replace(/<b>/gi,'').replace(/<\\/b>/gi,'');\r\n    const trans_director = director.replace('|',',').replace(/,\\s*$/, \"\");\r\n    const trans_actor =  actor.replace(/\\|/gi,',').replace(/,\\s*$/, \"\");\r\n    const rating = {width:userRating*10+'%'};\r\n    \r\n    /* 의존성배열 대신 분기를 태우는 방식 */\r\n    const GetHighQualityPoster = async () => {\r\n        const regexp1 = /code=.+/gi;\r\n        const code = link.match(regexp1)[0].substr(5);\r\n        const getHighQualityPoster = \"/poster/bi/mi/photoViewPopup.nhn?movieCode=\" + code\r\n        const {data} = await axios.get(getHighQualityPoster);\r\n        const $ = cheerio.load(data);\r\n        const res = $('#targetImage').attr('src');\r\n        setState({\r\n            isLoading: false,\r\n            HQPoster: res\r\n        });\r\n    };\r\n    \r\n    useEffect(() => {\r\n        if(state.isLoading) {\r\n            GetHighQualityPoster();\r\n        }\r\n    });\r\n    \r\n    /* 의존성 배열 방식 */\r\n    // const GetHighQualityPoster = useCallback(async () => {\r\n    //     const regexp1 = /code=.+/gi;\r\n    //     const code = link.match(regexp1)[0].substr(5);\r\n    //     const getHighQualityPoster = \"/poster/bi/mi/photoViewPopup.nhn?movieCode=\" + code\r\n    //     const {data} = await axios.get(getHighQualityPoster);\r\n    //     const $ = cheerio.load(data);\r\n    //     const res = $('#targetImage').attr('src');\r\n    //     setState({\r\n    //         isLoading: false,\r\n    //         HQPoster: res\r\n    //     });\r\n    // }, [link]);\r\n    \r\n    // useEffect(() => {\r\n    //    GetHighQualityPoster();\r\n    // }, [GetHighQualityPoster]);\r\n\r\n    console.log(\"test\");\r\n\r\n    return (\r\n        <div className=\"movie\">\r\n                <a href={link}>\r\n                    {state.isLoading  ?\r\n                        ( <img src={image} alt={trans_title} title={trans_title} /> ) : \r\n                        ( <img src={state.HQPoster} alt={trans_title} title={trans_title} /> )\r\n                    }\r\n                </a>\r\n            <div className=\"movie__data\">\r\n                <h3 className=\"movie__title\">{trans_title}</h3>\r\n                <h5 className=\"movie__subtitle\">{subtitle}</h5>\r\n                <ul className=\"movie__info\">\r\n                    <li>\r\n                        {pubDate} | 감독 : {trans_director} | 출연 : {trans_actor}\r\n                    </li>\r\n                </ul>\r\n                <span className=\"movie__rating\">네티즌 평점&nbsp;:&nbsp; \r\n                    <div className=\"star-ratings-css\">\r\n                        <div className=\"star-ratings-css-top\" style={rating}><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>\r\n                        <div className=\"star-ratings-css-bottom\"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>\r\n                    </div>\r\n                    &nbsp;({userRating})\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Movie;","import React from \"react\";\nimport axios from \"axios\";\nimport Movie from \"./movie-func\";\nimport \"./app.css\";\n\nclass App extends React.Component{\n  state = {\n    isLoading: true,\n    movies : []\n  };\n\n  getMovies = async()=> {\n    const headers = {\n      'Content-Type': 'plain/text',\n      'X-Naver-Client-Id': '0izvEVBObzi_c80HfGoy',\n      'X-Naver-Client-Secret': '26YpCvQo_u',\n    }\n    const params = {\n      'query' : '무림',\n      'display':'20'\n    }\n\n    const {data: {items} }=  await axios.get(\"/api/v1/search/movie.json\",{params,headers});\n\n    this.setState({movies:items, isLoading: false});\n  };\n \n\n  componentDidMount() {\n    this.getMovies();\n  }\n\n  render() {\n    const {isLoading, movies} = this.state;\n    return (\n        <section className=\"container\">\n        {isLoading ? (\n          <div className=\"lodaer\">\n            <span className=\"lodaer__text\">Loading...</span>\n          </div>\n          ): (\n            <div className=\"movies\">\n              {movies.map(movie =>(\n                <Movie\n                  key={movie.title}\n                  title={movie.title}\n                  subtitle={movie.subtitle}\n                  image={movie.image}\n                  pubDate={movie.pubDate}\n                  director={movie.director}\n                  actor={movie.actor}\n                  userRating={movie.userRating}\n                  link={movie.link}\n                  />\n              ))}\n           </div>\n          )}\n\n\n        </section>\n    )\n  }\n  \n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App /> \n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}